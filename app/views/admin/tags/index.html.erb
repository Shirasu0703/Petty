<div class="card p-4 mb-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0">タグ検索</h1>
    <%= link_to "タグ一覧・編集へ", admin_tags_path, class: "text-primary" %>
  </div>

  <%= form_tag admin_reviews_path, method: :get, class: 'd-flex align-items-center gap-2' do %>
    <%= select_tag :tag_id,
      options_from_collection_for_select(Tag.all, :id, :tag, params[:tag_id]),
      prompt: 'タグで絞り込み検索',
      class: 'form-select w-auto',
      onchange: 'this.form.submit();'
    %>
    <% if params[:tag_id].present? %>
      <%= link_to "リセット", admin_reviews_path, class: "btn btn-outline-secondary btn-sm" %>
    <% end %>
  <% end %>
  <h1>タグ一覧</h1>

<%= link_to "新規タグを追加", new_admin_tag_path, class: "btn btn-primary" %>

<table class="table table-striped mt-3">
  <thead>
    <tr>
      <th>ID</th>
      <th>タグ名</th>
      <th>使用数</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <% @tags.each do |tag| %>
      <tr>
        <td><%= tag.id %></td>
        <td><%= tag.tag %></td>
        <td><%= "Hospitals: #{tag.hospitals.count}, Reviews: #{tag.reviews.count}" %></td>
        <td>
          <%= link_to "編集", edit_admin_tag_path(tag), class: "btn btn-sm btn-outline-primary" %>
          <%= link_to "削除", admin_tag_path(tag),
                      method: :delete,
                      data: { confirm: "削除してよろしいですか？" },
                      class: "btn btn-sm btn-outline-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

</div>




