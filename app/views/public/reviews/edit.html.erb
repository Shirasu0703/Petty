<h1>レビュー編集ページ</h1>
<% if @review.errors.any? %>
  <%= @review.errors.count %>件のエラーが発生しました
  <ul>
    <% @review.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>

<div class="container mt-4">
  <%= form_with model: @review, url: public_hospital_review_path(@review.hospital, @review), method: :patch do |f| %>


  <div class="mb-3">
    <strong>現在のタグ</strong>
    <div class="d-flex flex-wrap mt-2">
      <% @review.tags.each do |tag| %>
        <div class="position-relative mr-2 mb-2">
          <span class="badge text-primary p-2 pr-4"><%= tag.tag %></span>
          <%= link_to "&times;".html_safe, remove_tag_public_hospital_review_path(@review.hospital, @review, tag_id: tag.id),
          method: :delete, data: { confirm: "「#{tag.tag}」を削除しますか？" },
          class: "btn btn-sm btn-danger position-absolute tag-style">
        </div>
      <% end %>
    </div>
  </div>
  <div class="md-3">
    <h4><%= f.label :cleanliness_comment, "清潔さ" %></h4>
    <%= render 'layouts/rating_form', object: @review, type: :cleanliness_rating, read_only: true, score: @review.cleanliness_rating %>
    <%= f.text_field :cleanliness_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :doctor_comment, "先生の対応" %></h4>
    <%= render 'layouts/rating_form', object: @review, type: :doctor_rating, read_only: true, score: @review.doctor_rating %>
    <%= f.text_field :doctor_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :staff_comment, "スタッフの対応" %></h4>
    <%= render 'layouts/rating_form', object: @review, type: :staff_rating, read_only: true, score: @review.staff_rating %>
    <%= f.text_field :staff_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :price_comment, "料金" %></h4>
    <%= render 'layouts/rating_form', object: @review, type: :price_rating, read_only: true, score: @review.price_rating %>
    <%= f.text_field :price_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :waiting_comment, "待ち時間" %></h4>
    <%= render 'layouts/rating_form', object: @review, type: :waiting_rating, read_only: true, score: @review.waiting_rating %>
    <%= f.text_field :waiting_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :title, "レビュータイトル" %></h4>
    <%= f.text_field :title, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :body, "総合評価" %><//h4>
    <%= render 'layouts/rating_form', object: @review, type: :rating, read_only: true, score: @review.rating %>
    <%= f.text_area :body, row: 5, class: "form-control border border-secondary" %>
  </div>

  <div class="md-3">
    <h4><%= f.label :animal_comment, "動物目線でひとこと！(任意)" %></h4>
    <%= f.text_field :animal_comment, class: "form-control border border-secondary" %>
  </div>

  <div class="my-3">
    <%= f.submit "更新", class: "btn btn-warning" %> |
    <%= link_to "削除", public_hospital_review_path(@review.hospital, @review), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
  </div>
  <% end %>

  <%= link_to "詳細に戻る", public_hospital_review_path(@review.hospital, @review), class: "btn btn-warning" %> 
  <%= link_to "一覧に戻る", public_hospital_reviews_path, class: "btn btn-warning" %>
</div>


